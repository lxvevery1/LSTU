# Kafka

Kafka - масштабируемость, отказоустойчивость, высокая пропускная способность.

Прогер берет сообщение, кладет в топик.
У топика есть буфер сообщений по партициям.

Zookeeper - вспомогательная утилита, регулирующая брокеров.

Если надо перечиатать последние 140 сообщений, то в коде задаем очередь curr - 140 => читаем.

consumer-group - строчка в конфиге, можно запустить несколько контейнеров с одним и тем же образом и конфигами.
Будет 2 консюмера и будет параллельное чтение сразу из двух партиций. Перебалансировка - читай первую, а ты читай вторую.
Это параллельное чтение одного и того же канала сообщений.

Хорошо, когда n консюмеров == n партиций.

Когда пишем одним продюсером - случайная партиция.

Иногда хочется чтобы гарантировалась очередность доставки сообщений.
Для 2х партиций третье не всегда достается раньше четвертого.

Это решается путем правильной конфигурации сообщения - Key + Data.

Если клиент подключился к одному серверу из кластера кафки, кафка не забудет на каком сервере была остановка

Валидация - схема сообщений - json/avro схема.

telescopeID (int), "type": (int);

3, Поднии кафку, позапкускай продесеров и консьюмеров.
Скриншот создания топиков с сообщениями.

Следующее занятие не получится провести.
