## Domain name system - DNS
Глобальное пространство доменных имён
Домены топ левела делятся на несколько ккатегорий:
	домены исторического типа
	домены по странам
Как использовались историяеские домены? Для вычисления обратных зон. 
net, org, mil, com, gov, все коммерсанты должны быть под .com
Мутная тема между net, com, org. 
com - считается корпоративным доменом.
Долгое время (лет 25) это все держалось, но потом появились новые домены. 
Это пространство имен строго зонировано -> зона - область ответственности.

в глобаьном протранестве доменных имен действует правило - если такого имени нет, то его можно создать, но чтобы 
lsu.lipetsk.ru - внутри него можно создавать поддомены. Владелец зоны lipetsk.ru: я делегирую тебе зону lstu и теперь я больше их не администрирую. Таким образом, реализуется глобальная уникальность. Как это делается? При помощи регистраторов. Сами организации лишь оказывают услуги по регистрации доменов, если он свободен и не противоречивает policy, то его администрирование можно передать тебе.
Регистрация в каждых зонах стоят по разному. Если суд решит, что мы нарушили правила trademark, то домен могут отобрать.
Если домен же внесен в регистрационную базу, то его можно отобрать только через суд.
### Как это все работает?
Неотъемленомй частью является база данных - источники информации. С точки зрения DNS - это авторитетные источники.
Для того, чтобы у баз данных был ..., то для нее нужен администратор, который вносит информацию.
Какой адрес у ya.ru? Запрос записывается в кэш.

Один сервер может выступать и как авторитетный, так и как кеширующий. Конкретный сервер может иметь несколько зон и может обслуживать и .com, .org, .mil, ... . Каждый сервер где-то расположен в интернете и имеет свой ip-адрес.
Количество серверов может быть сотни тысяч, но ещё больше будет клиентов этой больщой распределенной базы данных.
Каким образом клент найдет информацию о ya.ru

У каждого сервера есть пул адресов, эти адреса прописываются в конф файле на каждом узле. /etc/resolv.conf

В итоге каждый клиент знает некий ближайший name-server 
Есть также 8.8.8.8:8888 .

hosts - файл, который затмевает все остальные. 

В какой момент ремени нужно пользоваться DNS?
Когда приложению (браузеру) ввели адрес в виде символов и её нужно преобразовать в виде адреса.

В API Linux есть 
gethostbyname
gethostbyaddr - нужно серверу. Чтобы сервер знал кто к нему присоединяется. 

В стандартной библиотеке есть resolver, который реализует эти функции, именно тут происходит логика, управлять можно через resolver config. Именно тут указываются именные 

gethostbyname("ya.ru") -> что делает resolver? Отправляет запрос - DNS Query. DNS Query как и любой любой запрос. DNS протокол работает по UDP, и соответвтвственно использует бинарные данные. Что представляет собой БД DNS -> KeyValueStore - представляет собой record, который имеет свой ключ и значение. Можно запросить ключ и ренж ключей.
key - является составным и в нем есть несколько первичных компонентов:
	1. Класс
	2. Тип
	3. Имя
Предусмотрено хранение классов, тип определяет типы записи.
В DNS применяется несколько типов записи - тип A и тип AAA.
тип A - нейминг какого-то типа.
Когда хост хочет знать ip имени, то делает запрос gethostbyname("ya.ru"), сначала он проверяет кэш, если записи в кэше нет, то нужно спросить у сервера.

База данных ведь распределенная - в name сервере есть файлик hints - в нем прописано 13 корневых серверов

При старте сервер пытается связаться к каким-то из этих 13 и запрашивает адрес сервера для TOP lvl домена. И один из 13 расскажет про эти адреса. 
Теперь у него в кеше поялвяется инфа о том какой сервер и какой айпи. Сервер начинает обрезать имя. Например,
lk.lstu.lipetsk.ru - обрезаем.
Есть ли информация о lk? 1
о lstu ? 1
о lipetsk.ru ? 0
Корневой сервер понятия не имеет о том где lipetsk.ru, но укажет тот name server, который знает о lk.lstu.lipetsk.ru, это ru, потом lipetsk.ru, потом lstu.lipetsk.ru, потом lk.lstu.lipetsk.ru и все данные запишутся в кеш. Это рекурсивный способ, позволяющий закидывать много полезной инфы в кеш.

Если вы как юзер пк, то можен не воодить полностью имя, например 
ping serv1
или 
ping serv1.myorg.com
Если resolver спросит, то ему скажут, что это ns домен.
Если в этом ресолвере написано что search это myorg.com, то первый раз он спросит serv1.myorg.com
Это позволит не дописывать суффикс вручную.

Обратный ресолвинг - или как найти какое имя соотв айпи адресу
inaddrarva - в этом домене имя представляет собой dns адрес записаный в обратном порядке. Сначала посылается query, а затем ptr с именем.
a - address
aaa - ipv6

Кроме aaa и ptr есть масса других важных записей - SOA - start of autority - зона.
DNS Query - class: in, type: ns, ns: aaa. Запрос вернет имя, по которому можно 
txt - text - placeholder для собственной инфы. Её используют для проверки авторизации/роботов. Если хотите сертификат на омен заходим на lets inscript и внесем записи.
Есть записи типа cname, srv.

# WWW - World-Wide WEB
Что такое WWW?
WWW - набор технологий для неподготовленного пользователя, есть интернет, в нем есть хосты, а на хостах лежат ресурсы. Ресурсы - это то что можно посмотреть. Есть программа (веб браузер), которая умеет это делать - скачивать из интернета ресурсы и тут же отображать их. Чтобы он скачал, нужно чтобы каждый ресурс имел свой uniq id - 
URI - uniform resource identificator
URL - uniform resource locator

http://ya.ru - ресурс по id, который URL.
http, https и тп - схема скачивания ресурсов. 
Введи адрес, а тебе покажут что там находится.
Что такое файловый сервер? ФС - есть папки, там подпапки (explorer).
Та жа парадигма и в URL

http - получение ресурса идет по // необязательно 
левая часть - до хоста с портом идет необязательная часть
resolver разрешает часть до протокола, устанавливает соединения, который имеет ip, запрашивает ресурс, скачивает  визуализирует как умеет.

Content-type - текстовая строка. 
Первый параметр после : тип (text/audio/image...) / подтип (plgin, html). 