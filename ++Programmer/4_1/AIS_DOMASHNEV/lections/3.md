Когда компов было не так много и в основном были мейн фреймы, вполне хватало ручного ведения учета хостов
и изначально использовался файл HOSTS - для настройки адреса комп. и его имени.

DNS - получить по имени IP, решает задачу запоминания IP адреса для человека.
2 сложности:
    Основной функционал - разрешение. В рамках чего

    Обеспечение уникальности имен.
    Большое кол-во ответственных за назначение имен. И все должны договориться.

    Всю систему ДНС можно представить в виде дерева.
    В корне дерева является пустсой элемент
    Домены региональные - ru, us, ... + com, org, edu, ...
    За домен точка отвечают: IANO, InterNIC - чтобы домены первого уровня были разные
    Управление доменов первого уровня дилегируются другими органами - например, органы страны.
    * -> ru, us, com, org, edu
    ru -> yandex, mail, lipetsk - можно регистрировать любой домен, согласовываются с ru
    com -> google, microsoft - домены второго уровня
    lipetsk -> stu

*
 ├──ru      <-- высота
 │   ├──yandex
 │   ├──mail
 │   └──lipetsk
 │       ├──stu
 │       └──serv01
 ├──us
 ├──com
 │   ├──google
 │   └──microsoft
 ├──org
 └──edu




hosts
 └──local
     ├──int
     ├──internal
     └──loc


Преимущества - можем дать домен любой организации.
2 соседних ip могут принадлежать различным доменам
Ведь домены и адреса никак не связаны. И их соответствие хранится в виде таблицы DNS - имя-ip_адрес

Центральными элементами системы днс являются днс серверы
Центральными узлами являются серверы ДНС. Они и разрешают запросы клиентов:
какой ip адрес у этого имени?

Какие возможны варианты хранения о пространстве имен DNS
На примере lipetsk.ru - вся на одном сервере -> вся информация о дочерних доменах +0 хранится там. Как только решим добавить комп в stu

Lipetsk.ru не знает ничего о хостах своих доменов. И когда регистрируется домен - compA, то за этот домен отвечает DNS-сервер

Связи между серверами располагаются сверху-вниз

Сервера, отвечающие за домены нижележащего уровня и всё!
Все DNS сервера знают корень, отвечающие за все высокие домены

Локальный компьютер знает ip-адрес DNS сервера провайдера.
www.google.com
А какой ip у www.google.com? - DNS сервер провайдера смотрит у себя в кеше - если есть, значит вернет и возвращает клиенту ip адрес корневого DNS сервера
Клиент посылает запрос к корневому DNS серверу. Корневой не знает. Смотрит первый уровень иерархии - www.google._com_
А com-то знает про google, следовательно отсылает запрос ему, а он уже рещает отвечать ему или нет

Если DNS сервер не знает куда послать, то он смотрит кто его обслуживает. В случае неудачи, результат будет отрицательный

Вторая схема - рекурсивная
Если все сервера настроены отвечать в рекурсивном режиме

Первый запрос идет DNS-серверу провайдера. Ответ на DNS сервер он не знает -> посылает запрос корневому DNS-серверу.
При работе в рекурсивном режиме посылает запрос для com. google.com находит у себя ответ. И результат по обратному маршруту доходит до клиента

Корневые DNS-сервера никогда не работают в рекурсивном режиме.
Используется смешанная схема - у корневых DNS-серверов никогда не формируется кэш

В системе DNS широко используется кэширование и если в кэше есть ответ, то его отправит из кэша

При переходе на новый ip, доменное имя не поменяется, но из-за кэша запросы все равно будут приходить на старый адрес
FIX: обновить кэш


Одна зона может обслуживаться несколькими серверами. Один DNS сервер может хранить несколько зон DNS
Если есть 2 сервера - serv01, serv02, то compA.ru может храниться

┌─────────────────┐┌────────┐
│compA.ru         ││compB.ru│
└┬───────┬───────┬┘└┬───────┘
┌▽─────┐┌▽─────┐┌▽──▽──┐
│serv01││serv03││serv02│
└──────┘└──────┘└──────┘
'
    compA.ru -> serv01
    compA.ru -> serv02

    compB.ru -> serv02

    compA.ru -> serv03
'

Между первичными и вторичными серверами может происходить синхронизация - вторичные сервера спращивают у первичных об обновлении информации

Существует 3 типа зон:
первичная - зона на сервере
вторичная - на вторичных серверах
третичная - заглушка - нужна для перекрестных связей, чтобы mail.ru мог напрямую обратиться к google.com

Первичная и втоичная - идентичные зоны

Если зона compA вторичная, а compB - первичная

Зачем зоны размещать на нескольких серверах
    Резервирование
    Балансировка нагрузки

Это были типы - зоны, где есть имена - зоны прямого просмотра - основная сост. DNS. Разрешают запросы типа а какой ip-адрес у этого имени?

Есть и зоны обратного уровня - а какое имя у этого ip-адреса?

12, 17, 34, 195, inaddr, arpa

* inaddr,arpa
 ├──1
 ├──2
 ├──3
 ├──...
 └──195
     ├──1
     ├──...
     ├──10
     ├──...
     └──34
         ├──17
         │   └──12 - RQDN
         └──18


[*] inaddr,arpa
 1
 2
 3
 ...
 195
  1
  10
  34
   17
    12 - RQDN
   18
