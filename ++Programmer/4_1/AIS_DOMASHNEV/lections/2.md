# Служба поддержки сети

## Имена локальной сети

В локальных сетях взаимодействие хостов используются - MAC-адресами

Компьютеры идентифицируются - IP-адресами
IP-адреса - сетевой уровень

IP -> MAC при помощи протокола

Кроме адресов компьютеры имеют имена (DNS)

Если днс нет, то локальные имена в виндоус придуманы уникальные имена (NetBIOS-имя)

Для разрешения NetBIOS-имен существует WINS - задача, как и у ДНС, только в сетях организации.
В линукс-сетях для разрешения локальных имен используется mDNS (multicast)
Если есть лок. сеть, но нет ДНС


## Варианты NetBIOS имен
NetBIOS имя - плоское имя до 15 символов в длину.
Сейчас имя хоста и NetBIOS одинаковые

1. На каждом комп. есть кэш имен.
2. LMHOSTS - содержит пары: имя-ip
[
    3. Широковещательный запрос - если хосту нужно разрешить имя - у кого имя {hostname}? - У меня! - Заносит в кэш и взаимодействует по ip
    4. WINS - спец. служба, отвечающая за работу с NetBIOS
]

Всего 4 типа узла NetBIOS

1. B-узел - только широковещательные запросы
2. P-узел - только с сервером WINS (без широковещательных)
3. M-узел - снача широковещ. запрос, затем запрос WINS
4. H-узел - снача к WINS, потом широковещ. запрос


Система имен NetBIOS больше, чем просто взаимодействие юзеров в сети по именам
Её идея в том, что с помощью имен комп. может объявить о тех сервисах, которые на нем доступны
Система bonjour - узел сам о себе сообщает

И в кэше и в бд WINS хранятся
имя[код]
имя - символьное имя
код, если 00h, то это точка - уровень сети неизвестен
20h - хосту разрешен доступ к расшейреным файлам
01c - котроллер домена

Хост пользуется не одним именем, а столько сколько сервисов он предоставляет

## Как хосты регистрируют

Когда комп. загружается то он регистрирует свое имя
в широк. NetBIOS-запросе.
Если уже такое имя в сети есть, то ответ по широк. отправляется тому комп. (уже используется - отказ)

Другие комп. сохраняют в кэш и в дальнейшем используют

Зачем сделан счетчик?
И почему в кэше это нельзя держать
В кэше могут быть старые записи - станет неактуальным

Широковещательные запросы норм работают в небольших сетях (10-15 комп.)

## Участники

Сервер - ведение БД, разрешение NetBIOS-имен, регистрация NetBIOS-имен + контроль уникальности
Клиент - ПО на комп. - к какому серверу WINS клиент обращается.
WINS-proxy - обеспечить работу клиентов, которые не работают с WIN-сервером напрямую


Служба WINS работает в динамическом режиме

NetBIOS-клиент после регистрации имени ведет отчет времени регистрации имени в WIN-сервере и в течении промежутка пытается его обновитьклиент
после регистрации имени ведет отчет времени регистрации имени в WIN-сервере и в течении промежутка пытается его обновить


То, что видим в сетевом окружении отображается в виде списков просмотров.

Основной обозреватель сети - ведет список живых компов.

Механизм назначения обозревателя

## Какие хар-ки используются?

* Протокол
* Версия оп. системы
* Статус основного контроллера домена
* Статус WIN-сервера
* Предпочитаемый главный обозреватель
* Текущий главный обозреватель
* Бывший главный обозреватель (замена текущего)
* Работающий резервный обозреватель (на каждые 32 комп. сети формируется обозреватель)
* Время непрерывной работы
* NetBIOS-имя

Среди всех обозревателей выбирается обозреватель домена - каждый основной обозреватель подлкючается к обозревателю домена и получает список всей сети
Если сеть большая:
    Обновить инфу, отправить новую, новый обозреватель получает новый список
КД - 12 минут


Тестирование по NetBIOS - 5 вопросов.
