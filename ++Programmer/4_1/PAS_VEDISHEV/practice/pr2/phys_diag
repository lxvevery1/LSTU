@startuml

' Определение сущностей
object Пользователь {
  + ID_Пользователь : int (обяз.)
  --
  Логин : string (обяз.)
  Пароль : string (обяз.)
  Роль : string (обяз.)
  E-mail : string (не обяз.)
  Телефон : string (не обяз.)
}

object МедНабор {
  + ID_МедНабор : int (обяз.)
  --
  Номер : int (обяз.)
  Название : string (обяз.)
  Подразделение : string (обяз.)
  Комментарий : string (не обяз.)
  Состояние : string (обяз.)
  Место_Хранения : string (обяз.)
}

object Объект {
  + ID_Объект : int (обяз.)
  --
  Название : string (обяз.)
  Адрес : string (обяз.)
  Тип : string (обяз.)

  _ID_Отправленный_Набор : int (необяз.)
  _ID_Полученный_Набор : int (необяз.)
}

object ЗапросМедНабора {
  + ID_Запрос : int (обяз.)
  --
  Дата : date (обяз.)
  Принят : bool (обяз.)
  _Логин : string (обяз.)

  _ID_МедНабор : int (обяз.)
}

object ЖурналПеремещений {
  + ID_Журнал : int (обяз.)
  --
  Дата : date (обяз.)

  _ID_МедНабор : int (обяз.)
  _ID_Объект_Отправитель : int (обяз.)
  _ID_Объект_Получатель : int (обяз.)
}

' Определение промежуточных таблиц для связей N к N
object Редактирование_МедНабор {
  + ID_Редактирования : int (обяз.)
  --
  Дата_Редактирования : date (обяз.)
  Комментарий : string (не обяз.)

  _ID_МедНабора : int (обяз.)
  _Логин : string (обяз.)
}

object Редактирование_Объект {
  + ID_Редактирования : int (обяз.)
  --
  Дата_Редактирования : date (обяз.)
  Комментарий : string (не обяз.)

  _ID_Объекта : int (обяз.)
  _Логин : string (обяз.)
}

' Определение связей
Пользователь <-- ЗапросМедНабора : "создает"
Пользователь <-- ЗапросМедНабора : "принимает"
МедНабор <-- ЗапросМедНабора : "запрашивается"
Объект --> МедНабор : "отправляет"
Объект --> МедНабор : "получает"
ЖурналПеремещений --> МедНабор : "добавляет"

' Определение связей с промежуточными таблицами
Пользователь <-- Редактирование_МедНабор : "редактирует"
МедНабор <-- Редактирование_МедНабор : "редактируется"
Пользователь <-- Редактирование_Объект : "редактирует"
Объект <-- Редактирование_Объект : "редактируется"

@enduml
